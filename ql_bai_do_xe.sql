CREATE DATABASE QLBaiDoXe
GO
USE QLBaiDoXe
GO

CREATE TABLE NHANVIEN
(
 MANHANVIEN    VARCHAR(20) PRIMARY KEY,
 TENNHANVIEN   NVARCHAR(50),
 GIOITINH      NVARCHAR(20)	null,
 DIENTHOAI     CHAR(11)		null,
 NGAYSINH      DATETIME		null,
 DIACHI        NVARCHAR(100)	null
)

CREATE TABLE DANGNHAP
(
 MATAIKHOAN    VARCHAR(20) PRIMARY KEY,
 TENTAIKHOAN   VARCHAR(50),
 LOAITAIKHOAN  INT,
 MATKHAU       NVARCHAR(50),
 MANHANVIEN    VARCHAR(20)
 CONSTRAINT PK_MANHANVIEN FOREIGN KEY(MANHANVIEN) REFERENCES NHANVIEN(MANHANVIEN)
)

CREATE TABLE KHUVUC
(
 MAKHUVUC   VARCHAR(20) PRIMARY KEY,
 TENKHUVUC  NVARCHAR(50),
 TRANGTHAI  NVARCHAR(50)
)

CREATE TABLE VITRI
(
MAVITRI     VARCHAR(20) PRIMARY KEY,
TENVITRI    NVARCHAR(50),
TRANGTHAI   NVARCHAR(50),
MAKHUVUC    VARCHAR(20),
 CONSTRAINT PK_MAKHUVUC FOREIGN KEY(MAKHUVUC) REFERENCES KHUVUC(MAKHUVUC)
)

CREATE TABLE VE
(
MAVE    VARCHAR(20) PRIMARY KEY,
DONGIA  INT
)

CREATE TABLE RAVAOBEN
(
 MARAVAOBEN    int PRIMARY KEY,
 MAVITRI       VARCHAR(20),
 MAVE          VARCHAR(20),			
 BIENSOXE      VARCHAR(20),
 DONGIA        INT,
 THANHTIEN     INT,
  CONSTRAINT PK_MAVITRI FOREIGN KEY(MAVITRI) REFERENCES VITRI(MAVITRI),
  CONSTRAINT PK_MAVERAVAO FOREIGN KEY(MAVE) REFERENCES VE(MAVE)
)

CREATE TABLE HOADON
(
 MAHOADON     VARCHAR(20),
 MAVITRI      VARCHAR(20),
 MANHANVIEN   VARCHAR(20),
 MAVE         VARCHAR(20),
 BIENSOXE     VARCHAR(20),
 THANHTIEN    INT,
 NGAYLAP      DATETIME,
  CONSTRAINT PK_MAVITRIHOADON FOREIGN KEY(MAVITRI) REFERENCES VITRI(MAVITRI),
  CONSTRAINT PK_MANHANVIENHOADON FOREIGN KEY(MANHANVIEN) REFERENCES NHANVIEN(MANHANVIEN),
  CONSTRAINT PK_MAVEHOADON FOREIGN KEY(MAVE) REFERENCES VE(MAVE)
)


-- VE
INSERT INTO VE VALUES ('S', 100)
INSERT INTO VE VALUES ('A', 90)
INSERT INTO VE VALUES ('B', 80)
INSERT INTO VE VALUES ('C', 70)
INSERT INTO VE VALUES ('D', 60)
INSERT INTO VE VALUES ('E', 50)

--KHU VUC
INSERT INTO KHUVUC VALUES('1', 'Khu A', N'Trống')
INSERT INTO KHUVUC VALUES('2', 'Khu B', N'Trống')
INSERT INTO KHUVUC VALUES('3', 'Khu C', N'Trống')
INSERT INTO KHUVUC VALUES('4', 'Khu D', N'Trống')

--VI TRI
INSERT INTO VITRI VALUES ('a', N'Vị trí 1', N'Trống', '1')
INSERT INTO VITRI VALUES ('b', N'Vị trí 2', N'Trống', '1')
INSERT INTO VITRI VALUES ('e', N'Vị trí 10', N'Trống', '2')
INSERT INTO VITRI VALUES ('f', N'Vị trí 11', N'Trống', '2')

--NHAN VIEN
INSERT INTO NHANVIEN VALUES('1', N'Lê Thị Hồng', N'Nữ', 0923232302, 06/12/1999, N'123/2 Nguyễn Ảnh Thủ, Quận 12')
INSERT INTO NHANVIEN VALUES('2', N'Nguyễn Văn Tèo', N'Nam', 09231237, 05/10/1988, N'11/2 Bạch Đằng, Quận Tân Bình')
INSERT INTO NHANVIEN VALUES('3', N'Trần Thị Tí', N'Nam', 080021312, 05/15/1995, N'20/1 Thành Công, Quận Tân Phú')
INSERT INTO NHANVIEN VALUES('4', N'Trần Thị Hồng Thắm', N'Nữ', 0134354345, 03/25/1993, N'1/1 Lê Lợi, Quận Gò Vấp')
INSERT INTO NHANVIEN VALUES('5', N'Nguyễn Dương', N'Nam', 02315889, 01/22/1999, N'897/34 Quang Trung, Quận Gò Vấp')

--DANG NHAP
INSERT INTO DANGNHAP VALUES ('Admin', 'Hong', 1, '123456', '1')
INSERT INTO DANGNHAP VALUES ('Admin2', 'Teo', 1, '123456', '2')

--RA VAO BEN
INSERT INTO RAVAOBEN VALUES (1, 'a', 'S', '11AB12', 1000, 100000)
INSERT INTO RAVAOBEN VALUES (2, 'b', 'S', '56VG22', 1000, 100000)
INSERT INTO RAVAOBEN VALUES (3, 'e', 'A', '11ABA12', 1000, 90000)

--HOA DON
INSERT INTO HOADON VALUES ('11', 'a', '1', 'S', '11AB12', 100000, 06/10/2019)
INSERT INTO HOADON VALUES ('12', 'b', '2', 'S', '56VG22', 100000, 06/11/2019)
INSERT INTO HOADON VALUES ('13', 'e', '2', 'A', '11ABA12', 90000, 06/12/2019)

-- Câu truy vấn
SELECT *FROM NHANVIEN
SELECT *FROM DANGNHAP
SELECT *FROM HOADON
SELECT *FROM RAVAOBEN
SELECT *FROM VITRI
SELECT *FROM KHUVUC
SELECT *FROM VE